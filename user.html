

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <title>pyop2 user documentation &mdash; PyOP2 0.1 documentation</title>

    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="PyOP2 0.1 documentation" href="index.html" />
    <link rel="next" title="pyop2 Package" href="pyop2.html" />
    <link rel="prev" title="Welcome to PyOP2’s documentation!" href="index.html" />
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pyop2.html" title="pyop2 Package"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to PyOP2’s documentation!"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">PyOP2 0.1 documentation</a> &raquo;</li>
      </ul>
    </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">

  <div class="section" id="pyop2-user-documentation">
<h1>pyop2 user documentation<a class="headerlink" href="#pyop2-user-documentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-pyop2">
<span id="pyop2-package"></span><h2><a class="reference internal" href="#module-pyop2" title="pyop2"><tt class="xref py py-mod docutils literal"><span class="pre">pyop2</span></tt></a> Package<a class="headerlink" href="#module-pyop2" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="pyop2.init">
<tt class="descclassname">pyop2.</tt><tt class="descname">init</tt><big>(</big><em>**kwargs</em><big>)</big><a class="headerlink" href="#pyop2.init" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise OP2: select the backend and potentially other configuration options.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>backend</strong> &#8211; Set the hardware-specific backend. Current choices
are <tt class="docutils literal"><span class="pre">&quot;sequential&quot;</span></tt> and <tt class="docutils literal"><span class="pre">&quot;opencl&quot;</span></tt>.</li>
<li><strong>debug</strong> &#8211; The level of debugging output.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pyop2.exit">
<tt class="descclassname">pyop2.</tt><tt class="descname">exit</tt><big>(</big><big>)</big><a class="headerlink" href="#pyop2.exit" title="Permalink to this definition">¶</a></dt>
<dd><p>Exit OP2 and clean up</p>
</dd></dl>

<dl class="function">
<dt id="pyop2.par_loop">
<tt class="descclassname">pyop2.</tt><tt class="descname">par_loop</tt><big>(</big><em>kernel</em>, <em>it_space</em>, <em>*args</em><big>)</big><a class="headerlink" href="#pyop2.par_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>Invocation of an OP2 kernel</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>kernel</strong> &#8211; The <a class="reference internal" href="#pyop2.Kernel" title="pyop2.Kernel"><tt class="xref py py-class docutils literal"><span class="pre">Kernel</span></tt></a> to be executed.</li>
<li><strong>it_space</strong> &#8211; The iteration space over which the kernel should be executed. The primary iteration space will be a <a class="reference internal" href="#pyop2.Set" title="pyop2.Set"><tt class="xref py py-class docutils literal"><span class="pre">Set</span></tt></a>. If a local iteration space is required, then this can be provided in brackets. For example, to iterate over a <a class="reference internal" href="#pyop2.Set" title="pyop2.Set"><tt class="xref py py-class docutils literal"><span class="pre">Set</span></tt></a> named <tt class="docutils literal"><span class="pre">elements</span></tt> assembling a 3x3 local matrix at each entry, the <tt class="docutils literal"><span class="pre">it_space</span></tt> argument should be <tt class="docutils literal"><span class="pre">elements(3,3)</span></tt>.</li>
<li><strong>*args</strong> &#8211; One or more objects of type <a class="reference internal" href="#pyop2.Global" title="pyop2.Global"><tt class="xref py py-class docutils literal"><span class="pre">Global</span></tt></a>, <a class="reference internal" href="#pyop2.Dat" title="pyop2.Dat"><tt class="xref py py-class docutils literal"><span class="pre">Dat</span></tt></a> or <a class="reference internal" href="#pyop2.Mat" title="pyop2.Mat"><tt class="xref py py-class docutils literal"><span class="pre">Mat</span></tt></a> which are the global data structures from and to which the kernel will read and write.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">par_loop</span></tt> invocation is illustrated by the following example:</p>
<div class="highlight-python"><pre>pyop2.par_loop(mass, elements(3,3),
       mat((elem_node[pyop2.i[0]]), elem_node[pyop2.i[1]]), pyop2.INC),
       coords(elem_node, pyop2.READ))</pre>
</div>
<p>This example will execute the <a class="reference internal" href="#pyop2.Kernel" title="pyop2.Kernel"><tt class="xref py py-class docutils literal"><span class="pre">Kernel</span></tt></a> <tt class="docutils literal"><span class="pre">mass</span></tt> over the
<a class="reference internal" href="#pyop2.Set" title="pyop2.Set"><tt class="xref py py-class docutils literal"><span class="pre">Set</span></tt></a> <tt class="docutils literal"><span class="pre">elements</span></tt> executing 3x3 times for each
<a class="reference internal" href="#pyop2.Set" title="pyop2.Set"><tt class="xref py py-class docutils literal"><span class="pre">Set</span></tt></a> member. The <a class="reference internal" href="#pyop2.Kernel" title="pyop2.Kernel"><tt class="xref py py-class docutils literal"><span class="pre">Kernel</span></tt></a> takes four arguments, the
first is a <a class="reference internal" href="#pyop2.Mat" title="pyop2.Mat"><tt class="xref py py-class docutils literal"><span class="pre">Mat</span></tt></a> named <tt class="docutils literal"><span class="pre">mat</span></tt>, the second is a field named
<cite>coords</cite>. The remaining two arguments indicate which local
iteration space point the kernel is to execute.</p>
<p>A <a class="reference internal" href="#pyop2.Mat" title="pyop2.Mat"><tt class="xref py py-class docutils literal"><span class="pre">Mat</span></tt></a> requires a pair of <a class="reference internal" href="#pyop2.Map" title="pyop2.Map"><tt class="xref py py-class docutils literal"><span class="pre">Map</span></tt></a> objects, one each
for the row and column spaces. In this case both are the same
<tt class="docutils literal"><span class="pre">elem_node</span></tt> map. The row <a class="reference internal" href="#pyop2.Map" title="pyop2.Map"><tt class="xref py py-class docutils literal"><span class="pre">Map</span></tt></a> is indexed by the first
index in the local iteration space, indicated by the <tt class="docutils literal"><span class="pre">0</span></tt> index
to <a class="reference internal" href="#pyop2.i" title="pyop2.i"><tt class="xref py py-data docutils literal"><span class="pre">pyop2.i</span></tt></a>, while the column space is indexed by
the second local index.  The matrix is accessed to increment
values using the <tt class="docutils literal"><span class="pre">pyop2.INC</span></tt> access descriptor.</p>
<p>The <tt class="docutils literal"><span class="pre">coords</span></tt> <a class="reference internal" href="#pyop2.Dat" title="pyop2.Dat"><tt class="xref py py-class docutils literal"><span class="pre">Dat</span></tt></a> is also accessed via the <tt class="docutils literal"><span class="pre">elem_node</span></tt>
<a class="reference internal" href="#pyop2.Map" title="pyop2.Map"><tt class="xref py py-class docutils literal"><span class="pre">Map</span></tt></a>, however no indices are passed so all entries of
<tt class="docutils literal"><span class="pre">elem_node</span></tt> for the relevant member of <tt class="docutils literal"><span class="pre">elements</span></tt> will be
passed to the kernel as a vector.</p>
</dd></dl>

<dl class="function">
<dt id="pyop2.solve">
<tt class="descclassname">pyop2.</tt><tt class="descname">solve</tt><big>(</big><em>M</em>, <em>b</em>, <em>x</em><big>)</big><a class="headerlink" href="#pyop2.solve" title="Permalink to this definition">¶</a></dt>
<dd><p>Solve a the matrix equation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>M</strong> &#8211; The <a class="reference internal" href="#pyop2.Mat" title="pyop2.Mat"><tt class="xref py py-class docutils literal"><span class="pre">Mat</span></tt></a> containing the matrix.</li>
<li><strong>b</strong> &#8211; The <a class="reference internal" href="#pyop2.Dat" title="pyop2.Dat"><tt class="xref py py-class docutils literal"><span class="pre">Dat</span></tt></a> containing the RHS.</li>
<li><strong>x</strong> &#8211; The <a class="reference internal" href="#pyop2.Dat" title="pyop2.Dat"><tt class="xref py py-class docutils literal"><span class="pre">Dat</span></tt></a> to receive the solution.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="pyop2.Kernel">
<em class="property">class </em><tt class="descclassname">pyop2.</tt><tt class="descname">Kernel</tt><big>(</big><em>code</em>, <em>name</em><big>)</big><a class="headerlink" href="#pyop2.Kernel" title="Permalink to this definition">¶</a></dt>
<dd><p>OP2 kernel type.</p>
<dl class="attribute">
<dt id="pyop2.Kernel.code">
<tt class="descname">code</tt><a class="headerlink" href="#pyop2.Kernel.code" title="Permalink to this definition">¶</a></dt>
<dd><p>String containing the c code for this kernel routine. This
code must conform to the OP2 user kernel API.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Kernel.name">
<tt class="descname">name</tt><a class="headerlink" href="#pyop2.Kernel.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Kernel name, must match the kernel function name in the code.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyop2.Set">
<em class="property">class </em><tt class="descclassname">pyop2.</tt><tt class="descname">Set</tt><big>(</big><em>size=None</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#pyop2.Set" title="Permalink to this definition">¶</a></dt>
<dd><p>OP2 set.</p>
<p>When the set is employed as an iteration space in a <a class="reference internal" href="#pyop2.par_loop" title="pyop2.par_loop"><tt class="xref py py-func docutils literal"><span class="pre">par_loop()</span></tt></a>, the extent of any local iteration space within each set entry is indicated in brackets. See the example in <a class="reference internal" href="pyop2.html#pyop2.op2.par_loop" title="pyop2.op2.par_loop"><tt class="xref py py-func docutils literal"><span class="pre">pyop2.op2.par_loop()</span></tt></a> for more details.</p>
<dl class="attribute">
<dt id="pyop2.Set.name">
<tt class="descname">name</tt><a class="headerlink" href="#pyop2.Set.name" title="Permalink to this definition">¶</a></dt>
<dd><p>User-defined label</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Set.size">
<tt class="descname">size</tt><a class="headerlink" href="#pyop2.Set.size" title="Permalink to this definition">¶</a></dt>
<dd><p>Set size</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyop2.Map">
<em class="property">class </em><tt class="descclassname">pyop2.</tt><tt class="descname">Map</tt><big>(</big><em>iterset</em>, <em>dataset</em>, <em>dim</em>, <em>values=None</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#pyop2.Map" title="Permalink to this definition">¶</a></dt>
<dd><p>OP2 map, a relation between two <a class="reference internal" href="#pyop2.Set" title="pyop2.Set"><tt class="xref py py-class docutils literal"><span class="pre">Set</span></tt></a> objects.</p>
<p>Each entry in the <tt class="docutils literal"><span class="pre">iterset</span></tt> maps to <tt class="docutils literal"><span class="pre">dim</span></tt> entries in the
<tt class="docutils literal"><span class="pre">dataset</span></tt>. When a map is used in a <a class="reference internal" href="#pyop2.par_loop" title="pyop2.par_loop"><tt class="xref py py-func docutils literal"><span class="pre">par_loop()</span></tt></a>,
it is possible to use Python index notation to select an
individual entry on the right hand side of this map. There are three possibilities:</p>
<ul class="simple">
<li>No index. All <tt class="docutils literal"><span class="pre">dim</span></tt> <a class="reference internal" href="#pyop2.Dat" title="pyop2.Dat"><tt class="xref py py-class docutils literal"><span class="pre">Dat</span></tt></a> entries will be passed to the
kernel.</li>
<li>An integer: <tt class="docutils literal"><span class="pre">some_map[n]</span></tt>. The <tt class="docutils literal"><span class="pre">n</span></tt> th entry of the
map result will be passed to the kernel.</li>
<li>An <tt class="xref py py-class docutils literal"><span class="pre">IterationIndex</span></tt>, <tt class="docutils literal"><span class="pre">some_map[pyop2.i[n]]</span></tt>. <tt class="docutils literal"><span class="pre">n</span></tt>
will take each value from <tt class="docutils literal"><span class="pre">0</span></tt> to <tt class="docutils literal"><span class="pre">e-1</span></tt> where <tt class="docutils literal"><span class="pre">e</span></tt> is the
<tt class="docutils literal"><span class="pre">n</span></tt> th extent passed to the iteration space for this <a class="reference internal" href="#pyop2.par_loop" title="pyop2.par_loop"><tt class="xref py py-func docutils literal"><span class="pre">par_loop()</span></tt></a>.
See also <a class="reference internal" href="#pyop2.i" title="pyop2.i"><tt class="xref py py-data docutils literal"><span class="pre">i</span></tt></a>.</li>
</ul>
<dl class="attribute">
<dt id="pyop2.Map.dataset">
<tt class="descname">dataset</tt><a class="headerlink" href="#pyop2.Map.dataset" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#pyop2.Set" title="pyop2.Set"><tt class="xref py py-class docutils literal"><span class="pre">Set</span></tt></a> mapped to.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Map.dim">
<tt class="descname">dim</tt><a class="headerlink" href="#pyop2.Map.dim" title="Permalink to this definition">¶</a></dt>
<dd><p>Dimension of the mapping: number of dataset elements mapped to per
iterset element.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Map.iterset">
<tt class="descname">iterset</tt><a class="headerlink" href="#pyop2.Map.iterset" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#pyop2.Set" title="pyop2.Set"><tt class="xref py py-class docutils literal"><span class="pre">Set</span></tt></a> mapped from.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Map.name">
<tt class="descname">name</tt><a class="headerlink" href="#pyop2.Map.name" title="Permalink to this definition">¶</a></dt>
<dd><p>User-defined label</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Map.values">
<tt class="descname">values</tt><a class="headerlink" href="#pyop2.Map.values" title="Permalink to this definition">¶</a></dt>
<dd><p>Mapping array.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyop2.Sparsity">
<em class="property">class </em><tt class="descclassname">pyop2.</tt><tt class="descname">Sparsity</tt><big>(</big><em>maps</em>, <em>dims</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#pyop2.Sparsity" title="Permalink to this definition">¶</a></dt>
<dd><p>OP2 Sparsity, a matrix structure derived from the union of the outer product of pairs of <a class="reference internal" href="#pyop2.Map" title="pyop2.Map"><tt class="xref py py-class docutils literal"><span class="pre">Map</span></tt></a> objects.</p>
<dl class="attribute">
<dt id="pyop2.Sparsity.dims">
<tt class="descname">dims</tt><a class="headerlink" href="#pyop2.Sparsity.dims" title="Permalink to this definition">¶</a></dt>
<dd><p>A pair giving the number of rows per entry of the row
<a class="reference internal" href="#pyop2.Set" title="pyop2.Set"><tt class="xref py py-class docutils literal"><span class="pre">Set</span></tt></a> and the number of columns per entry of the column
<a class="reference internal" href="#pyop2.Set" title="pyop2.Set"><tt class="xref py py-class docutils literal"><span class="pre">Set</span></tt></a> of the <tt class="docutils literal"><span class="pre">Sparsity</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Sparsity.maps">
<tt class="descname">maps</tt><a class="headerlink" href="#pyop2.Sparsity.maps" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of pairs (rmap, cmap) where each pair of
<a class="reference internal" href="#pyop2.Map" title="pyop2.Map"><tt class="xref py py-class docutils literal"><span class="pre">Map</span></tt></a> objects will later be used to assemble into this
matrix. The iterset of each of the maps in a pair must be the
same, while the dataset of all the maps which appear first
must be common, this will form the row <a class="reference internal" href="#pyop2.Set" title="pyop2.Set"><tt class="xref py py-class docutils literal"><span class="pre">Set</span></tt></a> of the
sparsity. Similarly, the dataset of all the maps which appear
second must be common and will form the column <a class="reference internal" href="#pyop2.Set" title="pyop2.Set"><tt class="xref py py-class docutils literal"><span class="pre">Set</span></tt></a> of
the <tt class="docutils literal"><span class="pre">Sparsity</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Sparsity.name">
<tt class="descname">name</tt><a class="headerlink" href="#pyop2.Sparsity.name" title="Permalink to this definition">¶</a></dt>
<dd><p>A user-defined label.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyop2.Const">
<em class="property">class </em><tt class="descclassname">pyop2.</tt><tt class="descname">Const</tt><big>(</big><em>dim</em>, <em>data=None</em>, <em>name=None</em>, <em>dtype=None</em><big>)</big><a class="headerlink" href="#pyop2.Const" title="Permalink to this definition">¶</a></dt>
<dd><p>Data that is constant for any element of any set.</p>
<dl class="exception">
<dt id="pyop2.Const.NonUniqueNameError">
<em class="property">exception </em><tt class="descname">NonUniqueNameError</tt><a class="headerlink" href="#pyop2.Const.NonUniqueNameError" title="Permalink to this definition">¶</a></dt>
<dd><p>The Names of const variables are required to be globally unique. This exception is raised if the name is already in use.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Const.cdim">
<tt class="descclassname">Const.</tt><tt class="descname">cdim</tt><a class="headerlink" href="#pyop2.Const.cdim" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of values for each member of the object. This is the product of the dims.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Const.ctype">
<tt class="descclassname">Const.</tt><tt class="descname">ctype</tt><a class="headerlink" href="#pyop2.Const.ctype" title="Permalink to this definition">¶</a></dt>
<dd><p>The c type of the data.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Const.data">
<tt class="descclassname">Const.</tt><tt class="descname">data</tt><a class="headerlink" href="#pyop2.Const.data" title="Permalink to this definition">¶</a></dt>
<dd><p>Data array.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Const.dim">
<tt class="descclassname">Const.</tt><tt class="descname">dim</tt><a class="headerlink" href="#pyop2.Const.dim" title="Permalink to this definition">¶</a></dt>
<dd><p>The shape of the values for each element of the object.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Const.dtype">
<tt class="descclassname">Const.</tt><tt class="descname">dtype</tt><a class="headerlink" href="#pyop2.Const.dtype" title="Permalink to this definition">¶</a></dt>
<dd><p>The Python type of the data.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Const.name">
<tt class="descclassname">Const.</tt><tt class="descname">name</tt><a class="headerlink" href="#pyop2.Const.name" title="Permalink to this definition">¶</a></dt>
<dd><p>User-defined label.</p>
</dd></dl>

<dl class="method">
<dt id="pyop2.Const.remove_from_namespace">
<tt class="descclassname">Const.</tt><tt class="descname">remove_from_namespace</tt><big>(</big><big>)</big><a class="headerlink" href="#pyop2.Const.remove_from_namespace" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove this Const object from the namespace</p>
<p>This allows the same name to be redeclared with a different shape.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyop2.Global">
<em class="property">class </em><tt class="descclassname">pyop2.</tt><tt class="descname">Global</tt><big>(</big><em>dim</em>, <em>data=None</em>, <em>dtype=None</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#pyop2.Global" title="Permalink to this definition">¶</a></dt>
<dd><p>OP2 global value.</p>
<dl class="attribute">
<dt id="pyop2.Global.cdim">
<tt class="descname">cdim</tt><a class="headerlink" href="#pyop2.Global.cdim" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of values for each member of the object. This is the product of the dims.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Global.ctype">
<tt class="descname">ctype</tt><a class="headerlink" href="#pyop2.Global.ctype" title="Permalink to this definition">¶</a></dt>
<dd><p>The c type of the data.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Global.data">
<tt class="descname">data</tt><a class="headerlink" href="#pyop2.Global.data" title="Permalink to this definition">¶</a></dt>
<dd><p>Data array.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Global.dim">
<tt class="descname">dim</tt><a class="headerlink" href="#pyop2.Global.dim" title="Permalink to this definition">¶</a></dt>
<dd><p>The shape of the values for each element of the object.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Global.dtype">
<tt class="descname">dtype</tt><a class="headerlink" href="#pyop2.Global.dtype" title="Permalink to this definition">¶</a></dt>
<dd><p>The Python type of the data.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Global.name">
<tt class="descname">name</tt><a class="headerlink" href="#pyop2.Global.name" title="Permalink to this definition">¶</a></dt>
<dd><p>User-defined label.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyop2.Dat">
<em class="property">class </em><tt class="descclassname">pyop2.</tt><tt class="descname">Dat</tt><big>(</big><em>dataset</em>, <em>dim</em>, <em>data=None</em>, <em>dtype=None</em>, <em>name=None</em>, <em>soa=None</em><big>)</big><a class="headerlink" href="#pyop2.Dat" title="Permalink to this definition">¶</a></dt>
<dd><p>OP2 vector data. A <tt class="docutils literal"><span class="pre">Dat</span></tt> holds a <tt class="docutils literal"><span class="pre">dim</span></tt> values for every member of a <a class="reference internal" href="#pyop2.Set" title="pyop2.Set"><tt class="xref py py-class docutils literal"><span class="pre">Set</span></tt></a>.</p>
<p>When a <tt class="docutils literal"><span class="pre">Dat</span></tt> is passed to <a class="reference internal" href="#pyop2.par_loop" title="pyop2.par_loop"><tt class="xref py py-func docutils literal"><span class="pre">par_loop()</span></tt></a>, the map via which
indirection occurs and the access descriptor are passed by
<cite>calling</cite> the <tt class="docutils literal"><span class="pre">Dat</span></tt>. For instance, if a <tt class="docutils literal"><span class="pre">Dat</span></tt> named <tt class="docutils literal"><span class="pre">D</span></tt> is
to be accessed for reading via a <a class="reference internal" href="#pyop2.Map" title="pyop2.Map"><tt class="xref py py-class docutils literal"><span class="pre">Map</span></tt></a> named <tt class="docutils literal"><span class="pre">M</span></tt>, this is
accomplished by::
D(M, pyop2.READ)</p>
<p>The <a class="reference internal" href="#pyop2.Map" title="pyop2.Map"><tt class="xref py py-class docutils literal"><span class="pre">Map</span></tt></a> through which indirection occurs can be indexed
using the index notation described in the documentation for the
<a class="reference internal" href="#pyop2.Map" title="pyop2.Map"><tt class="xref py py-class docutils literal"><span class="pre">Map</span></tt></a> class. Direct access to a Dat can be accomplished by
using the <tt class="xref py py-data docutils literal"><span class="pre">IdentityMap</span></tt> as the indirection.</p>
<dl class="attribute">
<dt id="pyop2.Dat.cdim">
<tt class="descname">cdim</tt><a class="headerlink" href="#pyop2.Dat.cdim" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of values for each member of the object. This is the product of the dims.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Dat.ctype">
<tt class="descname">ctype</tt><a class="headerlink" href="#pyop2.Dat.ctype" title="Permalink to this definition">¶</a></dt>
<dd><p>The c type of the data.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Dat.data">
<tt class="descname">data</tt><a class="headerlink" href="#pyop2.Dat.data" title="Permalink to this definition">¶</a></dt>
<dd><p>Numpy array containing the data values.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Dat.dataset">
<tt class="descname">dataset</tt><a class="headerlink" href="#pyop2.Dat.dataset" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#pyop2.Set" title="pyop2.Set"><tt class="xref py py-class docutils literal"><span class="pre">Set</span></tt></a> on which the Dat is defined.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Dat.dim">
<tt class="descname">dim</tt><a class="headerlink" href="#pyop2.Dat.dim" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of values at each member of the dataset.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Dat.dtype">
<tt class="descname">dtype</tt><a class="headerlink" href="#pyop2.Dat.dtype" title="Permalink to this definition">¶</a></dt>
<dd><p>The Python type of the data.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Dat.name">
<tt class="descname">name</tt><a class="headerlink" href="#pyop2.Dat.name" title="Permalink to this definition">¶</a></dt>
<dd><p>User-defined label.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Dat.soa">
<tt class="descname">soa</tt><a class="headerlink" href="#pyop2.Dat.soa" title="Permalink to this definition">¶</a></dt>
<dd><p>Are the data in SoA format?</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyop2.Mat">
<em class="property">class </em><tt class="descclassname">pyop2.</tt><tt class="descname">Mat</tt><big>(</big><em>sparsity</em>, <em>dtype=None</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#pyop2.Mat" title="Permalink to this definition">¶</a></dt>
<dd><p>OP2 matrix data. A <tt class="docutils literal"><span class="pre">Mat</span></tt> is defined on a sparsity pattern and holds a value
for each element in the <a class="reference internal" href="#pyop2.Sparsity" title="pyop2.Sparsity"><tt class="xref py py-class docutils literal"><span class="pre">Sparsity</span></tt></a>.</p>
<p>When a <tt class="docutils literal"><span class="pre">Mat</span></tt> is passed to <a class="reference internal" href="#pyop2.par_loop" title="pyop2.par_loop"><tt class="xref py py-func docutils literal"><span class="pre">par_loop()</span></tt></a>, the maps via which
indirection occurs for the row and column space, and the access
descriptor are passed by <cite>calling</cite> the <tt class="docutils literal"><span class="pre">Mat</span></tt>. For instance, if a
<tt class="docutils literal"><span class="pre">Mat</span></tt> named <tt class="docutils literal"><span class="pre">A</span></tt> is to be accessed for reading via a row <a class="reference internal" href="#pyop2.Map" title="pyop2.Map"><tt class="xref py py-class docutils literal"><span class="pre">Map</span></tt></a>
named <tt class="docutils literal"><span class="pre">R</span></tt> and a column <a class="reference internal" href="#pyop2.Map" title="pyop2.Map"><tt class="xref py py-class docutils literal"><span class="pre">Map</span></tt></a> named <tt class="docutils literal"><span class="pre">C</span></tt>, this is accomplished by:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">A</span><span class="p">(</span> <span class="p">(</span><span class="n">R</span><span class="p">[</span><span class="n">pyop2</span><span class="o">.</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="n">C</span><span class="p">[</span><span class="n">pyop2</span><span class="o">.</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]]),</span> <span class="n">pyop2</span><span class="o">.</span><span class="n">READ</span><span class="p">)</span>
</pre></div>
</div>
<p>Notice that it is <cite>always</cite> necessary to index the indirection maps
for a <tt class="docutils literal"><span class="pre">Mat</span></tt>. See the <a class="reference internal" href="#pyop2.Mat" title="pyop2.Mat"><tt class="xref py py-class docutils literal"><span class="pre">Mat</span></tt></a> documentation for more
details.</p>
<dl class="attribute">
<dt id="pyop2.Mat.cdim">
<tt class="descname">cdim</tt><a class="headerlink" href="#pyop2.Mat.cdim" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of values for each member of the object. This is the product of the dims.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Mat.ctype">
<tt class="descname">ctype</tt><a class="headerlink" href="#pyop2.Mat.ctype" title="Permalink to this definition">¶</a></dt>
<dd><p>The c type of the data.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Mat.dim">
<tt class="descname">dim</tt><a class="headerlink" href="#pyop2.Mat.dim" title="Permalink to this definition">¶</a></dt>
<dd><p>The shape of the values for each element of the object.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Mat.dims">
<tt class="descname">dims</tt><a class="headerlink" href="#pyop2.Mat.dims" title="Permalink to this definition">¶</a></dt>
<dd><p>A pair of integers giving the number of matrix rows and columns for each member of the row <a class="reference internal" href="#pyop2.Set" title="pyop2.Set"><tt class="xref py py-class docutils literal"><span class="pre">Set</span></tt></a>  and column <a class="reference internal" href="#pyop2.Set" title="pyop2.Set"><tt class="xref py py-class docutils literal"><span class="pre">Set</span></tt></a> respectively. This corresponds to the <tt class="docutils literal"><span class="pre">dim</span></tt> member of a <a class="reference internal" href="#pyop2.Dat" title="pyop2.Dat"><tt class="xref py py-class docutils literal"><span class="pre">Dat</span></tt></a>. Note that <tt class="docutils literal"><span class="pre">dims</span></tt> is actually specified at the <a class="reference internal" href="#pyop2.Sparsity" title="pyop2.Sparsity"><tt class="xref py py-class docutils literal"><span class="pre">Sparsity</span></tt></a> level and inherited by the <tt class="docutils literal"><span class="pre">Mat</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Mat.dtype">
<tt class="descname">dtype</tt><a class="headerlink" href="#pyop2.Mat.dtype" title="Permalink to this definition">¶</a></dt>
<dd><p>The Python type of the data.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Mat.name">
<tt class="descname">name</tt><a class="headerlink" href="#pyop2.Mat.name" title="Permalink to this definition">¶</a></dt>
<dd><p>User-defined label.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Mat.sparsity">
<tt class="descname">sparsity</tt><a class="headerlink" href="#pyop2.Mat.sparsity" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#pyop2.Sparsity" title="pyop2.Sparsity"><tt class="xref py py-class docutils literal"><span class="pre">Sparsity</span></tt></a> on which the <tt class="docutils literal"><span class="pre">Mat</span></tt> is defined.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyop2.Mat.values">
<tt class="descname">values</tt><a class="headerlink" href="#pyop2.Mat.values" title="Permalink to this definition">¶</a></dt>
<dd><p>A numpy array of matrix values.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This is a dense array, so will need a lot of memory.  It&#8217;s
probably not a good idea to access this property if your
matrix has more than around 10000 degrees of freedom.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="data">
<dt id="pyop2.i">
<tt class="descclassname">pyop2.</tt><tt class="descname">i</tt><a class="headerlink" href="#pyop2.i" title="Permalink to this definition">¶</a></dt>
<dd><p>Shorthand for constructing <tt class="xref py py-class docutils literal"><span class="pre">IterationIndex</span></tt> objects.</p>
<blockquote>
<div>i[idx]</div></blockquote>
<p>builds an <tt class="xref py py-class docutils literal"><span class="pre">IterationIndex</span></tt> object for which the <cite>index</cite> property is <cite>idx</cite></p>
</dd></dl>

<dl class="data">
<dt id="pyop2.READ">
<tt class="descclassname">pyop2.</tt><tt class="descname">READ</tt><em class="property"> = Access('READ')</em><a class="headerlink" href="#pyop2.READ" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#pyop2.Global" title="pyop2.Global"><tt class="xref py py-class docutils literal"><span class="pre">Global</span></tt></a>, <a class="reference internal" href="#pyop2.Dat" title="pyop2.Dat"><tt class="xref py py-class docutils literal"><span class="pre">Dat</span></tt></a>, or <a class="reference internal" href="#pyop2.Mat" title="pyop2.Mat"><tt class="xref py py-class docutils literal"><span class="pre">Mat</span></tt></a> is accessed read-only.</p>
</dd></dl>

<dl class="data">
<dt id="pyop2.WRITE">
<tt class="descclassname">pyop2.</tt><tt class="descname">WRITE</tt><em class="property"> = Access('WRITE')</em><a class="headerlink" href="#pyop2.WRITE" title="Permalink to this definition">¶</a></dt>
<dd><p>The  <a class="reference internal" href="#pyop2.Global" title="pyop2.Global"><tt class="xref py py-class docutils literal"><span class="pre">Global</span></tt></a>, <a class="reference internal" href="#pyop2.Dat" title="pyop2.Dat"><tt class="xref py py-class docutils literal"><span class="pre">Dat</span></tt></a>, or <a class="reference internal" href="#pyop2.Mat" title="pyop2.Mat"><tt class="xref py py-class docutils literal"><span class="pre">Mat</span></tt></a> is accessed write-only, and OP2 is not required to handle write conflicts.</p>
</dd></dl>

<dl class="data">
<dt id="pyop2.RW">
<tt class="descclassname">pyop2.</tt><tt class="descname">RW</tt><em class="property"> = Access('RW')</em><a class="headerlink" href="#pyop2.RW" title="Permalink to this definition">¶</a></dt>
<dd><p>The  <a class="reference internal" href="#pyop2.Global" title="pyop2.Global"><tt class="xref py py-class docutils literal"><span class="pre">Global</span></tt></a>, <a class="reference internal" href="#pyop2.Dat" title="pyop2.Dat"><tt class="xref py py-class docutils literal"><span class="pre">Dat</span></tt></a>, or <a class="reference internal" href="#pyop2.Mat" title="pyop2.Mat"><tt class="xref py py-class docutils literal"><span class="pre">Mat</span></tt></a> is accessed for reading and writing, and OP2 is not required to handle write conflicts.</p>
</dd></dl>

<dl class="data">
<dt id="pyop2.INC">
<tt class="descclassname">pyop2.</tt><tt class="descname">INC</tt><em class="property"> = Access('INC')</em><a class="headerlink" href="#pyop2.INC" title="Permalink to this definition">¶</a></dt>
<dd><p>The kernel computes increments to be summed onto a <a class="reference internal" href="#pyop2.Global" title="pyop2.Global"><tt class="xref py py-class docutils literal"><span class="pre">Global</span></tt></a>, <a class="reference internal" href="#pyop2.Dat" title="pyop2.Dat"><tt class="xref py py-class docutils literal"><span class="pre">Dat</span></tt></a>, or <a class="reference internal" href="#pyop2.Mat" title="pyop2.Mat"><tt class="xref py py-class docutils literal"><span class="pre">Mat</span></tt></a>. OP2 is responsible for managing the write conflicts caused.</p>
</dd></dl>

<dl class="data">
<dt id="pyop2.MIN">
<tt class="descclassname">pyop2.</tt><tt class="descname">MIN</tt><em class="property"> = Access('MIN')</em><a class="headerlink" href="#pyop2.MIN" title="Permalink to this definition">¶</a></dt>
<dd><p>The kernel contributes to a reduction into a <a class="reference internal" href="#pyop2.Global" title="pyop2.Global"><tt class="xref py py-class docutils literal"><span class="pre">Global</span></tt></a> using a <tt class="docutils literal"><span class="pre">min</span></tt> operation. OP2 is responsible for reducing over the different kernel invocations.</p>
</dd></dl>

<dl class="data">
<dt id="pyop2.MAX">
<tt class="descclassname">pyop2.</tt><tt class="descname">MAX</tt><em class="property"> = Access('MAX')</em><a class="headerlink" href="#pyop2.MAX" title="Permalink to this definition">¶</a></dt>
<dd><p>The kernel contributes to a reduction into a <a class="reference internal" href="#pyop2.Global" title="pyop2.Global"><tt class="xref py py-class docutils literal"><span class="pre">Global</span></tt></a> using a <tt class="docutils literal"><span class="pre">max</span></tt> operation. OP2 is responsible for reducing over the different kernel invocations.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">pyop2 user documentation</a><ul>
<li><a class="reference internal" href="#module-pyop2"><tt class="docutils literal"><span class="pre">pyop2</span></tt> Package</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Welcome to PyOP2&#8217;s documentation!</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="pyop2.html"
                        title="next chapter">pyop2 Package</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/user.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pyop2.html" title="pyop2 Package"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to PyOP2’s documentation!"
             >previous</a> |</li>
        <li><a href="index.html">PyOP2 0.1 documentation</a> &raquo;</li>
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Imperial College et al.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>